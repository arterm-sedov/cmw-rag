# LLM Providers (at least one required)
GOOGLE_API_KEY=your_google_api_key_here
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Embedding
EMBEDDING_MODEL=ai-forever/FRIDA
EMBEDDING_DEVICE=cpu

# ChromaDB
CHROMADB_PERSIST_DIR=./data/chromadb_data
CHROMADB_COLLECTION=mkdocs_kb

# Retrieval
TOP_K_RETRIEVE=20
TOP_K_RERANK=10
CHUNK_SIZE=500
CHUNK_OVERLAP=150

# Retrieval â€“ Multi-vector queries and Query Decomposition
# Safe defaults; override to tune latency/recall trade-offs
RETRIEVAL_MULTIQUERY_ENABLED=true
RETRIEVAL_MULTIQUERY_MAX_SEGMENTS=4
RETRIEVAL_MULTIQUERY_SEGMENT_TOKENS=448
RETRIEVAL_MULTIQUERY_SEGMENT_OVERLAP=64
RETRIEVAL_MULTIQUERY_PRE_RERANK_LIMIT=60

# Optional: LLM-based query decomposition (off by default)
RETRIEVAL_QUERY_DECOMP_ENABLED=false
RETRIEVAL_QUERY_DECOMP_MAX_SUBQUERIES=4

# Reranker
RERANK_ENABLED=true
RERANKER_MODEL=DiTy/cross-encoder-russian-msmarco

# LLM
DEFAULT_LLM_PROVIDER=gemini
DEFAULT_MODEL=gemini-2.5-flash
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=4096

# Gradio
GRADIO_SERVER_NAME=0.0.0.0
GRADIO_SERVER_PORT=7860
GRADIO_SHARE=false

# Agent Mode (LangChain agent with tool calling)
# If true, uses agent-based handler; if false, uses direct retrieval
USE_AGENT_MODE=false

# Memory compression (conversation history)
MEMORY_COMPRESSION_THRESHOLD_PCT=85
MEMORY_COMPRESSION_TARGET_TOKENS=1000

# Performance guardrails
# When counting tokens, approximate for very large strings beyond this char length
RETRIEVAL_FAST_TOKEN_CHAR_THRESHOLD=200000
